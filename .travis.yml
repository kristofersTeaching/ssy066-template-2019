language: java
jdk: openjdk8
sudo: false
branches:
  only:
  - master
before_install:
- rm -r src/test
- git clone --depth 1 --branch test2019 git@github.com:kristofersTeaching/ssy066.git
- cp -r ssy066/src/test ./src/
- find . -type d | sed -e "s/[^-][^\/]*\//  |/g" -e "s/|\([^ ]\)/|-\1/"
script: mvn surefire-report:report
after_success:
- git checkout master
- mkdir Reports
- cp ./target/site/surefire-report.html ./Reports/
deploy:
  provider: releases
  api_key:
    secure: PIuPthWXcB5OtiUEbdKgX4iT9KNUcQg1F8erbDag1gk7Fl92xksWMmubyArVC/SKZZkhIHDf3I69MobU1E9KBu+dr9QW1aXfw18zV4vxppQNJD5PMvtr4lCQqzyaadB67JDg3ek7XXOovnqXpoyGXMmCv/PStZHJ/HC+COeXio0b8vXLv3JvNgQoAH0xWCdCAn7jvFk5qsD7DPG1rB9IieCRUj+dNyz+VuREvAwSfXBZcAuRFNzSJewVJXOBRrvB7a/OBqqAgoNA4QEq6qnbNSofjo2tdtQJQMXmVOccqi+DB5aAd8flq5wBPYONNXnYDyInv8bxnVWsVuP8a9J7jSSkPIQG+OmvOqVy1wbQRf9hL8zwX3nEgaaoakP4K9NaCl0G86mJpnJQ5tmUpG9PcumztZ9jw9m7yHmsjm70uv56uqR6vqkzn+D3OKcMO1w1H4c0gomkfRE0uhBjFdM35jhO103QMbw8CPtvo7Yv/WF89+Wilp5bwsQnDDzIJZ0PpSOqESEW3muU5aCv+pWgTRhT7n9MGcsvjCcokC9xI6XhboFMP4cF5hMeAY9YuT0fpo00IB3kzDrKwdFq22OnPedjF/pA392wUc46XOtYU2ru0UWI60wWDmlX6GyHAy+sLv4rdpGPEU37AY5KbVbPcN9TvjMdMjZMSxSuwzKsOak=
  file: "./Reports/surefire-report.html"
notifications:
  slack: ssy066:cj4ylbDC0eDQHQ7oVLvl1lxk
  on_success: always
  on_failure: never
  template:
  - 'Build result %{result} at %{repository} (%{commit}). '
  - 'Build details: %{build_url}'
env:
  global:
    secure: lbyLZDn7F44HugNVa540dyLs512zGHNQBrDhGFjgeKMDJM6ufCkd8X+WxWOWPhnw961ydU3Nc1vXPGGAYB1i247xYUXHwwRSQtmeNL4FhOk8JtVkqfPjS+4EvYBoNjdAQdo8h9GJq2i1lUM5s8VMQx66DvMxhUGqNHe6sq9meeYPET5729DfJxWo/9vk2Uv+j77KMhB6aGBLVze9YzDQs7mfFN27dlqj+5iLhn7MSN0kt/NJN6PsN4rb643BfsRTJVnSOj59X/emfDSVMqYgGSCzjL1TqUuc75caxWnlaun4rCetNzuWPp30lC+JfOG5BnNX8AOBlLWIkkBcbv3PDI5I6PtiSZ56WajV/P9dX9hl4Buogtr+jyBEfB+tfHTmXTUp0As8mYd6DZClt4zEqvNxHXGQ7y8MgETkEhF/lRmdTBkPVQxoHRjBxZJO0ysgSvT6yhKnPwclRJw+rMsV/xGBXBBgbKdq59Wu5u7mEXdcpibhsdKVNFNhuDVAcjdfFCxZfxxAs9wQyKnpmiZQowWNMgq0TCD9hlJzNM9ur/54V50GSNEyF5xfSz13G61180uXG6fE+0iviSu07gkeUYXsaYhSpH6+qWJ0AZzN3mKgH9Dy72EaEPHkIFWkWWlVT8AmgkfnqX01z/k3CXTJbH5HbqCcjeo3l+v9A3awY2M=
